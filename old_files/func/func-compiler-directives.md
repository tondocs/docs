[https://github.com/ton-blockchain/docs/blob/master/docs/func/compiler_directives.md]

Директивы компилятора

Это ключевые слова, начинающиеся с # и предписывающие компилятору выполнить некоторые действия, проверки или изменить параметры.

Эти директивы можно использовать только на самом внешнем уровне (не внутри определения функции).

#include

Директива #include позволяет включить другой файл исходного кода FunC, который будет разобран в месте включения.

Синтаксис: #include "filename.fc";. Файлы автоматически проверяются на повторное включение, и попытка включить файл более одного раза будет молча проигнорирована по умолчанию, с предупреждением, если уровень многозначности не ниже 2.

Если при разборе включаемого файла произошла ошибка, дополнительно выводится стек включений с расположением каждого включения в цепочке.

#pragma

Директива #pragma - это метод предоставления компилятору дополнительной информации, помимо той, что передается в самом языке.

#pragma version

pragma version используется для применения определенной версии компилятора FunC при компиляции файла.

Версия указывается в формате semver, то есть a.b.c, где a - мажорная версия, b - минорная, а c - патч.

Разработчику доступны несколько операций сравнения:


a.b.c или =a.b.c - требует именно версию компилятора a.b.c,
>a.b.c - требует, чтобы версия компилятора была выше, чем a.b.c,

>=a.b.c - требует, чтобы версия компилятора была выше или равна a.b.c,

 - требует, чтобы версия компилятора была ниже, чем a.b.c,

 - требует, чтобы версия компилятора была меньше или равна a.b.c,

^a.b.c - требует, чтобы главная и младшая версии компилятора были равны a.b, а патч был не ниже части c,

^a.b - требует, чтобы основная версия компилятора была равна части a, а основная версия была не ниже части b,
^a - требует, чтобы основная версия компилятора была не ниже.



Для других операторов сравнения (=, >, >=, , ) короткий формат предполагает нули в пропущенных частях, то есть:


>a.b - то же самое, что и >a.b.0 (и поэтому НЕ соответствует версии a.b.0),
 - то же самое, что  (и поэтому НЕ соответствует версии a.0.1)
^a.b.0 НЕ то же самое, что ^a.b.


Например, ^a.1.2 соответствует a.1.3, но не a.2.3 или a.1.0, однако ^a.1 соответствует им всем. 

Эта директива может быть использована несколько раз, версия компилятора должна удовлетворять всем предусмотренным условиям.

#pragma not-version

Синтаксис этой прагмы такой же, как и pragma version, но она не работает, если условие выполнено.

Его можно использовать, например, для внесения в черный список определенной версии, известной своими проблемами.